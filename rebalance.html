<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rebalance</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
</head>
<body>
    <div id="app" class="container">
        <h1>View all my funds</h1>
        <div class="card" style="width: 18rem;">
            <canvas id="myChart" class="p-4"></canvas>

            <div class="card-body">
                <h5 class="card-title">{{ this.funds[0].fundName }}</h5>
                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content. IDK IF A FUND NEEDS ANY DESC</p>
                <a href="#" class="btn btn-primary">Go somewhere</a>
            </div>
        </div>
    </div>
    

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/axios@1.1.2/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

    <script>
        const { createApp } = Vue

        createApp({
            data() {
                return {
                funds: [
                    {
                        fundName: "My Meme Fund",
                        stocksAllocation: [
                            {
                                ticker: "GME",
                                name: "GameStop Corp.",
                                allocation: 0.25
                            },
                            {
                                ticker: "AMC",
                                name: "AMC Entertainment Holdings Inc",
                                allocation: 0.35
                            },
                            {
                                ticker: "BBBY",
                                name: "Bed Bath & Beyond Inc",
                                allocation: 0.10
                            },
                            {
                                ticker: "BABA",
                                name: "Alibaba Group Holding Ltd - ADR",
                                allocation: 0.30
                            }
                        ]
                    }, 
                    {
                        fundName: "Wo De Safe Fund",
                        stocksAllocation: [
                            {
                                ticker: "AAPL",
                                name: "Apple Inc",
                                allocation: 0.25
                            },
                            {
                                ticker: "AMZN",
                                name: "Amazon.com, Inc.",
                                allocation: 0.35
                            },
                            {
                                ticker: "GOOG",
                                name: "Alphabet Inc Class C",
                                allocation: 0.10
                            },
                            {
                                ticker: "DIS",
                                name: "Walt Disney Co",
                                allocation: 0.30
                            },
                            {
                                ticker: "MMM",
                                name: "3M Co",
                                allocation: 0.30
                            },
                            {
                                ticker: "V",
                                name: "Visa Inc",
                                allocation: 0.30
                            },
                            {
                                ticker: "BA",
                                name: "Boeing Co",
                                allocation: 0.30
                            }
                        ]
                    }
                ]
                }
            },
            methods: {

            },
            mounted() {
                const labels = [];
                const stockPer = [];

                this.funds[0].stocksAllocation.forEach(stock => {
                    labels.push(stock.name);
                    stockPer.push(stock.allocation);
                });

                const data = {
                    labels: labels,
                    datasets: [{
                    label: 'My First dataset',
                    backgroundColor: [
                        'red',    // color for data at index 0
                        'blue',   // color for data at index 1
                        'green',  // color for data at index 2
                        'black',  // color for data at index 3
                        'pink',  // color for data at index 4
                        'green',  // color for data at index 5
                        'orange',  // color for data at index 6
                        //...
                    ],
                    // borderColor: 'rgb(255, 99, 132)',
                    data: stockPer,
                    }]
                };

                const config = {
                    type: 'pie',
                    data: data,
                    options: {
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                };

                const myChart = new Chart(
                    document.getElementById('myChart'),
                    config
                );

            }
        }).mount('#app')

    </script>
</body>
</html>